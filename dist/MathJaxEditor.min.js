!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.MathJaxEditor=t():e.MathJaxEditor=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(1);var a=n(5),o=r(a),u=n(10),l=r(u);window.addEventListener("load",l.default);var c=function(){function e(t){i(this,e);var n=new o.default(t);this.editor=n,this.version="1.1.6"}return s(e,[{key:"blur",value:function(){this.editor.blur()}},{key:"focus",value:function(){this.editor.focus()}},{key:"insertCommand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.editor.insertCommand(e,t,n)}},{key:"insert",value:function(e){this.editor.insert(e)}},{key:"getJax",value:function(){return console.warn("[deprecated] getJax is deprecated, use getValue instead."),this.editor.value}},{key:"getValue",value:function(){return this.editor.value}},{key:"moveCursorLeft",value:function(){this.editor.moveCursorLeft()}},{key:"moveCursorRight",value:function(){this.editor.moveCursorRight()}},{key:"erase",value:function(){this.editor.erase()}},{key:"on",value:function(e,t){this.editor.on(e,t)}}]),e}();e.exports=c},function(e,t,n){var r=n(2);"string"==typeof r&&(r=[[e.id,r,""]]);n(4)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(3)(),t.push([e.id,".mjx-cursor {\r\n  -webkit-animation: 1s mj-ed-blink step-end infinite;\r\n  -moz-animation: 1s mj-ed-blink step-end infinite;\r\n  -ms-animation: 1s mj-ed-blink step-end infinite;\r\n  -o-animation: 1s mj-ed-blink step-end infinite;\r\n  animation: 1s mj-ed-blink step-end infinite;\r\n  border-right: 2px solid #000;\r\n  color: transparent;\r\n}\r\n\r\n.mjx-cursor.wasRecentlyPlaced {\r\n  border-right-color: black !important;\r\n}\r\n\r\n.mj-ed-input {\r\n  left: -100%;\r\n  position: absolute;\r\n  top: -100%;\r\n}\r\n\r\n.mj-ed-display {\r\n  box-sizing: border-box;\r\n}\r\n\r\n.mj-ed-display * {\r\n  outline: none;\r\n}\r\n\r\n.mj-ed-selectionButton {\r\n  cursor: text;\r\n}\r\n\r\n.mjx-isEmpty {\r\n  color: #ccc;\r\n}\r\n\r\n@keyframes mj-ed-blink {\r\n  from, to {\r\n    border-color: black;\r\n  }\r\n  50% {\r\n    border-color: transparent;\r\n  }\r\n}\r\n\r\n@-moz-keyframes mj-ed-blink {\r\n  from, to {\r\n    border-color: transparent;\r\n  }\r\n  50% {\r\n    border-color: black;\r\n  }\r\n}\r\n\r\n@-webkit-keyframes mj-ed-blink {\r\n  from, to {\r\n    border-color: transparent;\r\n  }\r\n  50% {\r\n    border-color: black;\r\n  }\r\n}\r\n\r\n@-ms-keyframes mj-ed-blink {\r\n  from, to {\r\n    border-color: transparent;\r\n  }\r\n  50% {\r\n    border-color: black;\r\n  }\r\n}\r\n\r\n@-o-keyframes mj-ed-blink {\r\n  from, to {\r\n    border-color: transparent;\r\n  }\r\n  50% {\r\n    border-color: black;\r\n  }\r\n}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var s=this[i][0];"number"==typeof s&&(r[s]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=h[r.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](r.parts[s]);for(;s<r.parts.length;s++)i.parts.push(l(r.parts[s],t))}else{for(var a=[],s=0;s<r.parts.length;s++)a.push(l(r.parts[s],t));h[r.id]={id:r.id,refs:1,parts:a}}}}function i(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],s=i[0],a=i[1],o=i[2],u=i[3],l={css:a,media:o,sourceMap:u};n[s]?n[s].parts.push(l):t.push(n[s]={id:s,parts:[l]})}return t}function s(e,t){var n=m(),r=g[g.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),g.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=g.indexOf(e);t>=0&&g.splice(t,1)}function o(e){var t=document.createElement("style");return t.type="text/css",s(e,t),t}function u(e){var t=document.createElement("link");return t.rel="stylesheet",s(e,t),t}function l(e,t){var n,r,i;if(t.singleton){var s=b++;n=y||(y=o(t)),r=c.bind(null,n,s,!1),i=c.bind(null,n,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(t),r=f.bind(null,n),i=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=o(t),r=d.bind(null,n),i=function(){a(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function c(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=x(t,i);else{var s=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(s,a[t]):e.appendChild(s)}}function d(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(i),s&&URL.revokeObjectURL(s)}var h={},v=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},p=v(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),m=v(function(){return document.head||document.getElementsByTagName("head")[0]}),y=null,b=0,g=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=p()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=i(e);return r(n,t),function(e){for(var s=[],a=0;a<n.length;a++){var o=n[a],u=h[o.id];u.refs--,s.push(u)}if(e){var l=i(e);r(l,t)}for(var a=0;a<s.length;a++){var u=s[a];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete h[u.id]}}}};var x=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(6),o=r(a),u=n(7),l=r(u),c=n(8),d=r(c),f=n(9),h=8,v=13,p=37,m=39,y=46,b=function(){function e(t){var n=this,r=t.el,s=t.debug,a=void 0!==s&&s,u=t.focusClass,l=void 0===u?"isFocused":u,c=t.newLine,d=void 0!==c&&c,h=t.value,v=void 0===h?"":h;i(this,e);var p=MathJax.HTML.Element,m=(0,f.mustFindElement)(r),y=p("div",{className:"mj-ed-container"}),b=p("input",{className:"mj-ed-input"}),g=p("div",{className:"mj-ed-display"},["\\({\\cursor}"+v+"\\)"]),x=p("pre",{className:"mj-ed-debug"},["|"]);m.parentNode.replaceChild(y,m),y.appendChild(b),y.appendChild(g),y.appendChild(x),b.addEventListener("keydown",this.handleInputEvent.bind(this)),b.addEventListener("keyup",this.handleInputEvent.bind(this)),b.addEventListener("blur",this.blur.bind(this)),g.addEventListener("click",this.focus.bind(this)),document.body.addEventListener("click",this.handleBodyClick.bind(this)),g.style.opacity=0,x.style.display=a?"block":"none",MathJax.Hub.Queue(["Typeset",MathJax.Hub,g],function(){n.jaxElement=MathJax.Hub.getAllJax(g)[0]},function(){g.style.opacity=1,g.style.minHeight=g.offsetHeight+"px",n.update(v,{hidden:!0})}),this.$container=y,this.$debug=x,this.$display=g,this.$input=b,this.bus=new o.default,this.cursor=0,this.placer=null,this.debug=a,this.focusClass=l,this.newLine=d,this.value=v}return s(e,[{key:"update",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.value,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.cursor,i=(0,f.insertBetween)(t,r,"{\\cursor}").replace(/\d/g,function(e){return"{"+e+"}"}).replace(/\,/g,function(e){return"{"+e+"}"}).replace(/\{\}/g,"{\\isEmpty}").replace(/\[\]/g,"[\\isEmpty]").replace(/\{\{\\cursor\}\}/g,"{{\\cursor}\\isEmpty}").replace(/\[\{\\cursor\}\]/g,"[{\\cursor}\\isEmpty]");this.debug&&(this.$debug.innerHTML=(0,f.insertBetween)(t,r,"|")),this.updateJaxElement(i,function(){setTimeout(function(){e.placer=l.default.read(e,function(t){console.log("The cursor should be placed at "+t),e.cursor=t,e.update()})},20),e.updateCursorElement(n)})}},{key:"updateJaxElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Function;MathJax.Hub.Queue(["Text",this.jaxElement,e],t)}},{key:"updateCursor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.cursor+e,n=this.cursor,r=new d.default(this.value),i=r.at(n),s=r.at(t);e<0&&(s.when("{").andPreviousCharacterNotIs("}").findBackwards("\\","^","_","]").then(function(e){return t=e}),s.when("{").andPreviousCharacterIs("}").then(function(){return t-=1}),s.when("\\").andPreviousCharacterIs("\\").then(function(){return t-=1}),s.when(" ").findBackwards("\\").then(function(e){return t=e}),s.when("[").findBackwards("\\").then(function(e){return t=e})),e>0&&(i.when("\\","^","_").andNextCharacterNotIs("\\").findForwards("{"," ","[").then(function(e){return t=e+1}),i.when("}","]").andNextCharacterIs("{").then(function(){return t+=1}),i.when("\\").andNextCharacterIs("\\").then(function(){return t+=1})),this.cursor=t,this.update()}},{key:"updateCursorElement",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.hidden||!1;MathJax.Hub.Queue(function(){var t=e.$display.querySelector(".mjx-cursor");t&&(t.style.marginLeft||(t.style.marginLeft="-"+t.offsetWidth+"px"),e._cursorRecentlyPlaced&&clearTimeout(e._cursorRecentlyPlaced),(0,f.addClass)(t,"wasRecentlyPlaced"),e._cursorRecentlyPlaced=setTimeout(function(){(0,f.removeClass)(t,"wasRecentlyPlaced")},600),t.style.display=n?"none":"inline-block")})}},{key:"findCommandAt",value:function(e){var t={start:null,end:null},n=this.value,r=(n.length,e-1),i=e+1,s=void 0;for(s=i;s--;)if(~["\\","^","_"].indexOf(n[s])){t.start=s;break}for(s=r;s++<n.length;){if("}"===n[s]&&"{"!==n[s+1]){t.end=s;break}if(" "===n[s-1]){t.end=s-1;break}}return null===t.end&&(t.end=s),t}},{key:"handleInputEvent",value:function(e){var t=this,n=this.$input,r=n.value.trim(),i=e.keyCode;if(n.value="","keyup"===e.type&&(i=null),!r.length)return this.handleInput(i);var s={"+":"+","-":"-","=":"=",",":",",".":".","*":"\\cdot ","/":"\\div "},a={char:/[\d\w]/};r.split("").forEach(function(e){(e.match(a.char)||s[e])&&(s[e]&&(e=s[e]),t.handleInput(i,e))})}},{key:"handleInput",value:function(e,t){switch(e){case p:return void this.moveCursorLeft();case m:return void this.moveCursorRight();case h:return void this.erase();case y:return void this.delete();case v:return void(this.newLine&&this.insert("\\\\"))}e&&this.debug&&console.warn("The key "+e+" was pressed."),t&&this.insert(t)}},{key:"moveCursorLeft",value:function(){this.cursor>0&&this.updateCursor(-1)}},{key:"moveCursorRight",value:function(){this.cursor<this.value.length&&this.updateCursor(1)}},{key:"handleBodyClick",value:function(e){this.placer&&this.placer.fireClick(e)}},{key:"focus",value:function(){this.$input.focus(),this.updateCursorElement({hidden:!1}),this.bus.trigger("focus"),(0,f.addClass)(this.$display,this.focusClass)}},{key:"blur",value:function(){this.$input.blur(),this.updateCursorElement({hidden:!0}),this.bus.trigger("blur"),(0,f.removeClass)(this.$display,this.focusClass)}},{key:"insert",value:function(e){var t=this.cursor,n=this.value;this.cursor+=e.length,this.value=(0,f.insertBetween)(n,t,e),this.update()}},{key:"insertCommand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.focus(),n&&(e+="[]"),e+=t>0?"{":" ",this.insert(e),!(t<1)){var r=this.value,i=this.cursor,s="}"+"{}".repeat(t-1);this.value=(0,f.insertBetween)(r,i,s),this.update()}}},{key:"erase",value:function(){var e=this.cursor,t=this.cursor-1,n=this.value,r=void 0,i=void 0;if(~["{","}"," "].indexOf(n[t])){var s=this.findCommandAt(e);r=n.slice(0,s.start),i=n.slice(s.end+1)}else{var a=e-1;"\\"===n[t]&&"\\"===n[t-1]&&(a-=1),r=n.slice(0,a),i=n.slice(e)}this.value=r+i,this.cursor=r.length,this.update()}},{key:"delete",value:function(){var e=this.cursor,t=this.cursor+1,n=this.value,r=void 0,i=void 0;if("\\"===n[e]&&"\\"!==n[t]||"}"===n[e]){var s=this.findCommandAt(e);r=n.slice(0,s.start),i=n.slice(s.end+1)}else{var a=e,o=t;"\\"===n[e]&&"\\"===n[t]&&(o+=1),r=n.slice(0,a),i=n.slice(o)}this.value=r+i,this.cursor=r.length,this.update()}},{key:"on",value:function(e,t){this.bus.on(e,t)}}]),e}();t.default=b},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e),this.registry={}}return r(e,[{key:"on",value:function(e,t){this.registry[e]=(this.registry[e]||[]).concat(t)}},{key:"trigger",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.registry[e]&&(console.log(this.registry),this.registry[e].forEach(function(e){return e.apply(void 0,n)}))}}]),e}();t.default=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(t){n(this,e),this.intervals=[],this.onRequestPlacement=Function,this.tex=t.value,this.$display=t.$display,this.findings={},this.isDebug=t.debug,this.parse()}return i(e,[{key:"debug",value:function(){var e;this.isDebug&&(e=console).log.apply(e,arguments)}},{key:"addInterval",value:function(e,t,n,r,i){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.intervals.push({index:e,startX:t,endX:n,startY:r,endY:i,useAllArea:s})}},{key:"placeAtInterval",value:function(e,t,n,r){var i=e.endX-e.startX,s=e.index;return this.debug("Interval X from "+e.startX+" to "+e.endX+" (Middle point x: "+(e.startX+i/2)+", width: "+i+")"),this.debug("Interval Y from "+e.startY+" to "+e.endY),e.useAllArea?s:(t>e.startX+i/2&&(s=this.intervals[r+1]?this.intervals[r+1].index:this.tex.length),this.debug("[placeAtInterval] Cursor to be placed at "+s+"."),s)}},{key:"fireClick",value:function(e){var t=this,n=this.$display.getBoundingClientRect(),i=n.bottom,s=e.clientX,a=e.clientY,o=this.tex.length;if(this.debug("You has clicked at ("+s+", "+a+")."),this.debug(this.intervals),this.intervals.length&&!(a>i)){var u=!1;if(this.intervals.forEach(function(e,n){e.startX<=s&&s<e.endX&&e.startY<=a&&a<e.endY&&(u=!0,o=t.placeAtInterval(e,s,a,n))}),!u){var l=function(){var e={interval:null,distance:null,i:null};return t.intervals.forEach(function(t,n){if(t.startY<a&&a<t.endY){var r=Math.min(Math.abs(t.startX-s),Math.abs(t.endX-s));(null===e.distance||r<e.distance)&&(e.interval=t,e.distance=r,e.i=n)}}),e.interval?(o=t.placeAtInterval(e.interval,s,a,e.i),void t.debug("[fireClick] Not found a bounding, placeing at "+o+".")):{v:void 0}}();if("object"===("undefined"==typeof l?"undefined":r(l)))return l.v}this.onRequestPlacement(o)}}},{key:"find",value:function(e,t,n){this.findings[e]=this.findings[e]||0;var r=this.$display.querySelectorAll(".mjx-"+e)[this.findings[e]],i=r.getBoundingClientRect();this.addInterval(t,i.left,i.right,i.top,i.bottom),this.findings[e]+=1,n&&this.addInterval(t+1,0,0,0,0)}},{key:"findCommand",value:function(e,t){var n=this;e=e.replace(/[\[\{].*(\]\{.*)?/,"");var r=e.slice(1);this.findings[r]=this.findings[r]||0;var i=this.$display.querySelectorAll(".mjx-m"+r)[this.findings[r]];i.getBoundingClientRect();switch(r){case"frac":var s=i.querySelector(".mjx-numerator"),a=i.querySelector(".mjx-denominator"),o=s.getBoundingClientRect(),u=a.getBoundingClientRect(),l=[o,u],c=this.parseCommandAt(t),d=c.blocks;l.forEach(function(e,t){d[t].closeIndex-d[t].openIndex===1&&n.addInterval(d[t].closeIndex,e.left,e.right,e.top,e.bottom,!0)});break;case"root":case"sqrt":var f=this.parseCommandAt(t),d=f.blocks,h=f.brackets;if(h.closeIndex&&h.closeIndex-h.openIndex===1){var v=i.querySelector(".mjx-root .mjx-char"),p=v.getBoundingClientRect(),m=p.left,y=p.right,b=p.top,g=p.bottom;this.addInterval(h.closeIndex,m,y,b,g,!0)}if(d[0].closeIndex-d[0].openIndex===1){var x=i.querySelector(".mjx-box"),k=x.getBoundingClientRect(),C=k.left,w=k.right,I=k.top,E=k.bottom;this.addInterval(d[0].closeIndex,C,w,I,E,!0)}}}},{key:"parse",value:function(){for(var e=this.tex,t=e.length,n=0,r={isNumber:/\d/,isVariable:/\w/,isOperator:/[\+\-\=\,\.]/};n<t;n++){var i=e[n],s=!!~["}","]","\\"].indexOf(e[n+1]);if(r.isNumber.exec(i))this.find("mn",n,s);else if(r.isVariable.exec(i))this.find("mi",n,s);else if(r.isOperator.exec(i))this.find("mo",n,s);else if("\\"!==i||"\\"!==e[n+1]){if("\\"===i)for(var a=n,o="";a<t;a++){var u=e[a];if(s=!!~["}","]","\\"].indexOf(e[a+1]),o+=u,~[" ","{","["].indexOf(u)){var l={"\\cdot":"mo","\\div":"mo"},c=o.trim(),d=l[c]?l[c]:"mi";" "===u?this.find(d,n,s):(o.match(/\\sqrt\[/)&&(o=o.replace("sqrt","root")),this.findCommand(o,n)),n=a;break}}}else n+=1}}},{key:"parseCommandAt",value:function(e){for(var t=this.tex.length,n=[],r={openIndex:null,closeIndex:null},i=0;e<t;e++){var s=this.tex[e];if("["===s&&(r.openIndex=e),"]"===s&&(r.closeIndex=e),"{"===s&&(0===i&&n.push({openIndex:e}),i+=1),"}"===s&&(i-=1,0===i&&(n[n.length-1].closeIndex=e)),"}"===s&&"{"!==this.tex[e+1])break}return{blocks:n,brackets:r}}}],[{key:"read",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Function,r=new e(t);return r.onRequestPlacement=n,r}}]),e}();t.default=s},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e),this.tex=t}return r(e,[{key:"at",value:function(e){return new s(this.tex,e)}}]),e}(),s=function(){function e(t,r){n(this,e),this.tex=t,this.index=r,this.value=t[r]}return r(e,[{key:"is",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return!!~t.indexOf(this.value)}},{key:"when",value:function(){return new a(this,this.is.apply(this,arguments))}},{key:"previousCharacter",value:function(){return new e(this.tex,this.index-1)}},{key:"nextCharacter",value:function(){return new e(this.tex,this.index+1)}}]),e}(),a=function(){function e(t,r){n(this,e),this.assertion=r,this.char=t,this.tex=t.tex,this.iterator=t.index}return r(e,[{key:"and",value:function(e){this.assertion&&(this.assertion=!!e)}},{key:"andNextCharacterIs",value:function(e){return this.and(this.char.nextCharacter().is(e)),this}},{key:"andNextCharacterNotIs",value:function(e){return this.and(!this.char.nextCharacter().is(e)),this}},{key:"andPreviousCharacterIs",value:function(e){return this.and(this.char.previousCharacter().is(e)),this}},{key:"andPreviousCharacterNotIs",value:function(e){return this.and(!this.char.previousCharacter().is(e)),this}},{key:"findBackwards",value:function(){for(var e=this.tex,t=this.iterator,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];for(;t--&&!~r.indexOf(e[t]););return this.iterator=t,this}},{key:"findForwards",value:function(){for(var e=this.tex,t=e.length,n=this.iterator,r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];for(;n++<t&&!~i.indexOf(e[n]););return this.iterator=n,this}},{key:"then",value:function(e){this.assertion&&e(this.iterator)}}]),e}();t.default=i},function(e,t){"use strict";function n(e){var t=new Error("You must define a target element.");if(!e)throw t;if("string"==typeof e){var n=document.querySelector(e);if(!n)throw t;return n}return e}function r(e,t,n){var r=e.slice(0,t),i=e.slice(t);return r+n+i}function i(e,t){var n=e.className.split(" "),r="",i=!0,s=!1,a=void 0;try{for(var o,u=n[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var l=o.value;l!==t&&(r+=" "+l)}}catch(e){s=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(s)throw a}}e.className=r.trim()}function s(e,t){var n=e.className.split(" ");~n.indexOf(t)||(e.className+=" "+t),e.className=e.className.trim()}function a(e){var t=[].slice;return t.call(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.mustFindElement=n,t.insertBetween=r,t.removeClass=i,t.addClass=s,t.toArray=a},function(e,t){"use strict";function n(){var e=MathJax.InputJax.TeX,t=MathJax.ElementJax.mml;MathJax.Hub.processSectionDelay=0,MathJax.Hub.Register.StartupHook("TeX Jax Ready",function(){var n={mathvariant:t.INHERIT,mathsize:t.INHERIT,mathbackground:t.INHERIT,mathcolor:t.INHERIT,dir:t.INHERIT};e.Definitions.Add({macros:{cursor:"Cursor",isEmpty:"IsEmpty"}},null,!0),t.mcursor=t.mbase.Subclass({type:"cursor",isToken:!0,isSpacelike:function(){return!0},texClass:t.TEXCLASS.ORD,defaults:n}),t.misEmpty=t.mbase.Subclass({type:"isEmpty",isToken:!0,isSpacelike:function(){return!0},texClass:t.TEXCLASS.ORD,defaults:n}),e.Parse.Augment({Cursor:function(e){var n=t.mcursor("0");this.Push(n)},IsEmpty:function(e){var n=t.misEmpty("?");this.Push(n)}})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}])});